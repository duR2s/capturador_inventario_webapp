<mat-sidenav-container class="dashboard-sidenav-container">

  <!-- SIDENAV:
       [mode]: Dinámico. 'over' en móvil (tiene backdrop), 'side' en desktop.
       [opened]: Controlado por la variable isSidenavOpen.
       (openedChange): Detecta cuando se cierra/abre (ej. clic fuera en móvil).
  -->
  <mat-sidenav
    #sidenav
    class="app-sidenav"
    [mode]="isMobile ? 'over' : 'side'"
    [opened]="isSidenavOpen"
    (openedChange)="onSidenavChange($event)">

    <app-sidenav></app-sidenav>

  </mat-sidenav>

  <!-- CONTENT -->
  <mat-sidenav-content>

    <!-- TOOLBAR:
         Pasamos [isSidebarOpen] para que sepa qué icono mostrar.
         (menuClick) simplemente alterna el valor.
    -->
    <app-toolbar
      [isSidebarOpen]="isSidenavOpen"
      (menuClick)="sidenav.toggle()">
    </app-toolbar>

    <main class="content-area">
      <router-outlet></router-outlet>
    </main>

  </mat-sidenav-content>

</mat-sidenav-container>
