@import '../../../styles/color-variables'; // Asegúrate que la ruta sea correcta

$input-bg: #e8e8e6;
$input-border: #cfcfcf;
$card-radius: 16px;
$pill-radius: 100px;
$input-height: 42px; // Un poco más alto que el partial de escaneo para dar importancia

.wrapper-sesion {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  padding: 1rem;
}

.card-flotante-sesion {
  width: 100%;
  max-width: 500px; // Más angosto que el de escaneo, es un formulario vertical
  background: $color-white;
  border-radius: $card-radius;
  box-shadow: 0 10px 30px $color-shadow-dark;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  position: relative;
  overflow: hidden;

  // Decoración superior sutil
  &::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 6px;
    background: $gradient-green-primary;
  }
}

.header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 0.5rem;

  .icon-container {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: $color-primary-light-bg;
    color: $color-primary;
    display: flex;
    justify-content: center;
    align-items: center;
    mat-icon { font-size: 24px; width: 24px; height: 24px; }
  }

  .title-container {
    h2 {
      margin: 0;
      font-size: 1.25rem;
      color: $color-text-title;
      font-family: 'Nexa-Bold', sans-serif;
    }
    p {
      margin: 0;
      font-size: 0.875rem;
      color: $color-text-light;
    }
  }
}

.form-grid {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.error-feedback {
  background-color: #ffebee;
  color: $color-error;
  padding: 0.75rem;
  border-radius: 8px;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  mat-icon { font-size: 20px; width: 20px; height: 20px; }
}

.actions {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 1rem;

  button {
    height: 40px;
    border-radius: $pill-radius;
    font-family: 'Nexa-Bold', sans-serif;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 1.5rem;
  }

  .btn-cancelar {
    background: transparent;
    color: $color-text-muted;
    &:hover { color: $color-text-dark; background: rgba(0,0,0,0.05); }
  }

  .btn-crear {
    background: $color-primary;
    color: $color-white;
    gap: 0.5rem;
    box-shadow: 0 4px 12px rgba($color-primary, 0.3);

    &:hover:not(:disabled) {
      background: $color-primary-dark;
      transform: translateY(-1px);
    }

    &:disabled {
      background: $color-text-muted;
      cursor: not-allowed;
      box-shadow: none;
    }
  }
}

// ESTILOS DE INPUT (Reutilizados y adaptados del partial anterior)
::ng-deep {
  .pill-input {
    // Forzamos que el label no corte el borde redondeado
    .mdc-notched-outline__notch { border-top: none !important; }

    // Ocultamos la estructura default de Material outline para dibujar la nuestra
    .mdc-notched-outline__leading,
    .mdc-notched-outline__trailing { border: none !important; }

    .mat-mdc-text-field-wrapper {
      background-color: $input-bg !important;
      border-radius: $pill-radius !important;
      border: 1px solid $input-border;
      padding: 0 16px;
      height: $input-height;
      transition: all 0.2s;
    }

    &.mat-focused .mat-mdc-text-field-wrapper {
      background-color: $color-white !important;
      border-color: $color-primary !important;
      box-shadow: 0 0 0 3px $color-shadow-input;
    }

    input.mat-mdc-input-element, .mat-mdc-select-value {
      color: $color-text-dark !important;
      font-weight: 600;
    }

    .mat-mdc-form-field-icon-prefix {
      color: $color-text-muted;
      margin-right: 8px;
    }

    // Ajuste de labels flotantes
    .mdc-floating-label {
        top: 50% !important;
        transform: translateY(-50%);
        left: 40px !important; // Espacio para icono
        color: $color-text-light;
    }

    &.mat-focused .mdc-floating-label,
    &.mat-form-field-should-float .mdc-floating-label {
        transform: translateY(-160%) scale(0.85) !important;
        left: 10px !important;
        color: $color-primary-dark !important;
    }

    // Quitar espacio reservado debajo para errores (hacerlo compacto)
    .mat-mdc-form-field-subscript-wrapper {
        height: auto;
        position: absolute;
        bottom: -18px;
        font-size: 10px;
    }
  }
}
